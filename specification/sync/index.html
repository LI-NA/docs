<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">
<script src="/matomo.js" async></script>

<title data-react-helmet="true">Sync | Standard Notes Documentation</title>

<meta data-react-helmet="true" property="og:image" content="img/SN-ICON-500.png"><meta data-react-helmet="true" property="twitter:image" content="img/SN-ICON-500.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Standard Notes Documentation"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Sync | Standard Notes Documentation"><meta data-react-helmet="true" name="description" content="## Introduction"><meta data-react-helmet="true" property="og:description" content="## Introduction"><meta data-react-helmet="true" property="og:url" content="https://standardnotes.org/specification/sync">

<link data-react-helmet="true" rel="shortcut icon" href="/img/icon.png">


<link rel="stylesheet" href="/styles.c918f7c8.css">


<link rel="preload" href="/styles.c06fa580.js" as="script">

<link rel="preload" href="/runtime~main.b9c33659.js" as="script">

<link rel="preload" href="/main.9edfd8d7.js" as="script">

<link rel="preload" href="/1.b0f4c8cc.js" as="script">

<link rel="preload" href="/2.e3e42293.js" as="script">

<link rel="preload" href="/3.07dc1463.js" as="script">

<link rel="preload" href="/1be78505.861ec5d5.js" as="script">

<link rel="preload" href="/ec1ed54d.941577c0.js" as="script">

<link rel="preload" href="/17896441.c9e51d54.js" as="script">

<link rel="preload" href="/993edbb6.5efe7ec1.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_OaSq"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon.png" alt="Standard Notes Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://standardnotes.org/" class="navbar__item navbar__link">Website</a><a target="_blank" rel="noopener noreferrer" href="https://blog.standardnotes.org" class="navbar__item navbar__link">Blog</a><a target="_blank" rel="noopener noreferrer" href="https://standardnotes.org/help" class="navbar__item navbar__link">Help</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/standardnotes/" class="navbar__item navbar__link">GitHub</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/sn-extensions/" class="navbar__item navbar__link">Extensions</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon.png" alt="Standard Notes Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://standardnotes.org/" class="menu__link" position="right">Website</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://blog.standardnotes.org" class="menu__link" position="right">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://standardnotes.org/help" class="menu__link" position="right">Help</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/standardnotes/" class="menu__link" position="right">GitHub</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/sn-extensions/" class="menu__link" position="right">Extensions</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><a tabindex="-1" class="sidebarLogo_3ono" href="/"><img src="/img/icon.png" alt="Standard Notes Logo"><strong>Documentation</strong></a><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Standard Notes Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/welcome">Welcome</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Editing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/editing">Editing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/editing/bold-editor">Bold Editor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/editing/markdown-pro">Markdown Pro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/editing/task-editor">Task Editor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Listed</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/creating-a-blog-from-your-notes-with-listed-and-standard-notes">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-register-for-a-listed-blog">Register</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-publish-articles-to-listed">Publish articles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-manage-my-blog-settings-like-username-and-custom-domain">Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-email-my-subscribers-about-new-articles-and-updates">Email Subscribers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/what-is-my-listed-guestbook">Guest Book</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-change-the-colors-fonts-and-general-layout-of-my-listed-blog">Customize Styles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-specify-a-custom-date-for-a-post-or-set-the-canonical-url">Custom Date and Canonical URL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-hide-a-story-from-my-main-feed">Hide a story from main feed</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/listed/how-do-i-add-separate-pages-to-my-blog">Separate Pages</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Self Hosting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/self-hosting/getting-started">Getting Started with Self Hosting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/self-hosting/ec2-nginx">Self Hosting with EC2 and Nginx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/self-hosting/docker">Self Hosting with Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/self-hosting/heroku">Self Hosting with Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/self-hosting/managing-options">Managing options</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/intro">Intro to Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/building-an-extension">Building an Extension</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/local-setup">Local Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/themes">Themes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/extensions/publishing">Publishing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Specification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/specification/encryption">Encryption</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/specification/sync">Sync</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Sync</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a>Introduction</h2><p>This document outlines the specifications for the client-server communications of the Standard Notes client/server system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="models"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#models" title="Direct link to heading">#</a>Models</h2><p>The protocol consists of models on the server side and what are known as structures on the client side.</p><p><strong>Server Models</strong></p><ul><li>User</li><li>Item</li></ul><p><strong>Client Structures</strong></p><ul><li><em>Arbitrary</em></li></ul><p>An <code>Item</code> model has a <code>content</code> field. The <code>content</code> field stores a JSON encoded object that can be any thing the client needs to operate. In this client-server model, servers are to be treated as dumb and uninformed.</p><p>Relationships are handled by the client and not the server, which clients today have no problem handling. This allows for improvements to be made to the data model on the client level, and not on the difficult-to-change server level. It also allows for relationships to be encrypted.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="user"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#user" title="Direct link to heading">#</a>User</h2><p>A user model has the following properties:</p><table><thead><tr><th>name</th><th>type</th><th>description</th></tr></thead><tbody><tr><td>email</td><td>String</td><td>The email of the user.</td></tr><tr><td>password</td><td>String</td><td>The password for this user. <em>Note that passwords must be manipulated before being sent to the server.</em></td></tr><tr><td>pw_cost</td><td>String</td><td>The number of iterations to use for the KDF. See Encryption for more.</td></tr><tr><td>pw_nonce</td><td>String</td><td>Generated by the client during registration. See Encryption for more.</td></tr><tr><td>version</td><td>String</td><td>The version of the SF specification used when creating this user&#x27;s account. (Latest is 003) (This value is also updated when a user changes their password or updates their security version.)</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="items"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#items" title="Direct link to heading">#</a>Items</h2><p>Item models have the following properties:</p><table><thead><tr><th>name</th><th>type</th><th>description</th></tr></thead><tbody><tr><td>uuid</td><td>String (or uuid for some databases)</td><td>The unique identifier for this model.</td></tr><tr><td>content</td><td>Text</td><td>The JSON encoded structure of the item, encrypted.</td></tr><tr><td>content_type</td><td>String</td><td>The type of the structure contained in the <code>content</code> field. (i.e Note, Tag, Extension, etc.)</td></tr><tr><td>enc_item_key</td><td>Text</td><td>The locally encrypted encryption key for this item.</td></tr><tr><td>deleted</td><td>Bool</td><td>Whether the model has been deleted.</td></tr><tr><td>created_at</td><td>Date</td><td>The date this item was created.</td></tr><tr><td>updated_at</td><td>Date</td><td>The date this item was modified.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="client-structures"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#client-structures" title="Direct link to heading">#</a>Client Structures</h2><p>Client structures are stored in the <code>content</code> field of the <code>Item</code> model. A client structure can have any property the client chooses, as well as the following:</p><table><thead><tr><th>name</th><th>type</th><th>description</th></tr></thead><tbody><tr><td>appData</td><td>Dictionary</td><td>A domain based dictionary whose content must be preserved between platforms. <code>appData[domain]</code> contains data the client stores in the item.</td></tr><tr><td>references</td><td>Array</td><td>A metadata array of other <code>Item</code> uuids this model is related to and their respective <code>content_type</code>. See sample below.</td></tr></tbody></table><p><code>references</code> array sample:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {uuid: xxxx, content_type: &quot;Tag&quot;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {uuid: xxxxx, content_type: &quot;Tag&quot;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="rest-api"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#rest-api" title="Direct link to heading">#</a>REST API</h2><p>General:</p><ol><li><p>All requests after the initial authentication should be authenticated with a JWT with the <code>Authorization</code> header:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Authorization: Bearer _insert_JWT_here_</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="api-auth"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-auth" title="Direct link to heading">#</a>API-Auth</h2><p>Standard Notes uses JSON Web Tokens (JWT) for authentication.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="post-auth"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#post-auth" title="Direct link to heading">#</a>POST auth</h3><p><strong>Registers a user and returns a JWT</strong></p><p><em>Params: email, password, pw_cost, pw_nonce, version</em></p><p><em>Note</em>: <code>password</code> needs to be processed locally before being sent to the server. See Encryption for more. Never send the user&#x27;s inputted password to the server.</p><p>Responses:</p><p><code>200</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;token&quot; : &quot;...&quot;}</span></div></div></div></div></div><p><code>5xx</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;errors&quot; : []}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="post-authchange_pw"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#post-authchange_pw" title="Direct link to heading">#</a>POST auth/change_pw</h3><p><strong>Updates a user&#x27;s password.</strong></p><p><em>Params: email, password, current_password</em></p><p>Responses:</p><p><code>204</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">No Content</span></div></div></div></div></div><p>5xx</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;errors&quot; : []}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="post-authsign_in"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#post-authsign_in" title="Direct link to heading">#</a>POST auth/sign_in</h3><p><strong>Authenticates a user and returns a JWT.</strong></p><p><em>Note</em>: Passwords needs to be processed locally before being sent to the server. See Encryption for more. Never send the user&#x27;s inputted password to the server.</p><p><em>Params: email, password</em></p><p>Responses:</p><p><code>200</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;token&quot; : &quot;...&quot;}</span></div></div></div></div></div><p><code>5xx</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;errors&quot; : []}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="get-authparams"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#get-authparams" title="Direct link to heading">#</a>GET auth/params</h3><p><strong>Returns the parameters used for password generation.</strong></p><p><em>Params: email</em></p><p>Responses:</p><p><code>200</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;pw_cost&quot; : &quot;...&quot;, &quot;pw_nonce&quot; : &quot;...&quot;, &quot;version&quot; : &quot;...&quot;}</span></div></div></div></div></div><p><code>5xx</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;errors&quot; : []}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="items-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#items-1" title="Direct link to heading">#</a>Items</h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="post-itemssync"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#post-itemssync" title="Direct link to heading">#</a>POST items/sync</h4><p><strong>Saves local changes as well as retrieves remote changes.</strong></p><p><em>Params:</em></p><ul><li><code>items</code>: An array of items</li><li><code>sync_token</code>: the sync token returned from the previous sync call. Leave empty if first sync.</li><li><code>limit</code>: (optional) the number of results to return. <code>cursor_token</code> is returned if more results are available.</li></ul><p>Responses</p><p><code>200</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;retrieved_items&quot; : [], &quot;saved_items&quot; : [], &quot;unsaved&quot; : [], &quot;sync_token&quot; : &quot;&quot;}</span></div></div></div></div></div><p><code>5xx</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;errors&quot; : []}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="sync-discussion"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sync-discussion" title="Direct link to heading">#</a>Sync Discussion</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="deletion"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#deletion" title="Direct link to heading">#</a>Deletion:</h3><ul><li>Clients: set <code>deleted</code> equal to <code>true</code> and sync. When receiving an item that is <code>deleted</code>, remove it from the local database immediately.</li><li>Servers: if syncing an item that is <code>deleted</code>, clear out its <code>content</code> and <code>enc_item_key</code> fields, set <code>deleted</code> to true, and save.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="sync-completion"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sync-completion" title="Direct link to heading">#</a>Sync completion:</h3><p>Upon sync completion, the client should handle each response item as follows:</p><ul><li><code>retrieved_items</code>: these items are new or have been modified since last sync and should be merged or created locally.</li><li><code>saved_items</code>: saved items are dirty items that were sent to the sync request. These items should not be merged in their entirety upon completion. Instead, only their metadata should be merged. For example, if at Point A the client syncs a Note item that a user is still typing, and at Point B the sync completes, the user could have typed more content in between A and B. Thus, if you merge all content, the user&#x27;s progress in between A and B will be lost. However, if you merge just the metadata (usually just updated_at date), then this issue is avoided.</li><li><code>unsaved</code>: returned if an error occurred saving those items. This can happen in the case of a sync conflict, where an item attempting to be saved already has a pending change. This item will not be saved, and will instead be returned in this array. The client is then responsible for duplicating this item and assigning it a new UUID. Another scenario for unsaved is the improbable case of a UUID conflict.</li><li><code>sync_token</code>: this token should be saved when it is received and sent to subsequent sync requests. This token should also be persisted locally between app sessions. For first time sync, no token should be provided.</li><li><code>cursor_token</code>: returned if original request had a <code>limit</code>. Send this token back to the server to retrieve next page of results.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="importexport"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#importexport" title="Direct link to heading">#</a>Import/Export</h2><p>The export file is a JSON file of all the user&#x27;s items, unencrypted.</p><p><strong>Format:</strong></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;items&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;uuid&quot;: &quot;3162fe3a-1b5b-4cf5-b88a-afcb9996b23a&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;content_type&quot;: &quot;Note&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;content&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;references&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;uuid&quot;: &quot;901751a0-0b85-4636-93a3-682c4779b634&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;content_type&quot;: &quot;Tag&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;title&quot;: &quot;...&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;text&quot;: &quot;...&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;created_at&quot;: &quot;2016-12-16T17:37:50.000Z&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;uuid&quot;: &quot;023112fe-9066-481e-8a63-f15f27d3f904&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;content_type&quot;: &quot;Tag&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;content&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;references&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;uuid&quot;: &quot;94cba6b7-6b55-41d6-89a5-e3db8be9fbbf&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;content_type&quot;: &quot;Note&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;title&quot;: &quot;essays&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;created_at&quot;: &quot;2016-12-16T17:13:20.000Z&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="next-steps"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-steps" title="Direct link to heading">#</a>Next Steps</h2><p>Join the <a href="https://standardnotes.org/slack">Slack group</a> to discuss implementation details and ask any questions you may have.</p><p>You can also email <a href="mailto:help@standardnotes.org">help@standardnotes.org</a>.</p><p>Follow <a href="https://twitter.com/standardnotes">@standardnotes on Twitter</a> for updates and announcements.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/standardnotes/docs/edit/master/docs/specification/sync.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-03-08T06:34:13.000Z" class="docLastUpdatedAt_1sqk">3/7/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/specification/encryption"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Encryption</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#introduction" class="contents__link">Introduction</a></li><li><a href="#models" class="contents__link">Models</a></li><li><a href="#user" class="contents__link">User</a></li><li><a href="#items" class="contents__link">Items</a></li><li><a href="#client-structures" class="contents__link">Client Structures</a></li><li><a href="#rest-api" class="contents__link">REST API</a></li><li><a href="#api-auth" class="contents__link">API-Auth</a><ul><li><a href="#post-auth" class="contents__link">POST auth</a></li><li><a href="#post-authchange_pw" class="contents__link">POST auth/change_pw</a></li><li><a href="#post-authsign_in" class="contents__link">POST auth/sign_in</a></li><li><a href="#get-authparams" class="contents__link">GET auth/params</a></li><li><a href="#items-1" class="contents__link">Items</a></li></ul></li><li><a href="#sync-discussion" class="contents__link">Sync Discussion</a><ul><li><a href="#deletion" class="contents__link">Deletion:</a></li><li><a href="#sync-completion" class="contents__link">Sync completion:</a></li></ul></li><li><a href="#importexport" class="contents__link">Import/Export</a></li><li><a href="#next-steps" class="contents__link">Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/self-hosting/getting-started">Self Host a Sync Server</a></li><li class="footer__item"><a class="footer__link-item" href="/extensions/intro">Build an Extension</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/encryption">Specifications</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://standardnotes.org/slack">Join our Slack</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://forum.standardnotes.org/">Community Forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Support</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://blog.standardnotes.org">Help &amp; Contact</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/standardnotes">Twitter</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://reddit.com/r/standardnotes">Reddit</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 <a href="https://standardnotes.org">Standard Notes</a></div></div></div></footer>
</div>

<script src="/styles.c06fa580.js"></script>

<script src="/runtime~main.b9c33659.js"></script>

<script src="/main.9edfd8d7.js"></script>

<script src="/1.b0f4c8cc.js"></script>

<script src="/2.e3e42293.js"></script>

<script src="/3.07dc1463.js"></script>

<script src="/1be78505.861ec5d5.js"></script>

<script src="/ec1ed54d.941577c0.js"></script>

<script src="/17896441.c9e51d54.js"></script>

<script src="/993edbb6.5efe7ec1.js"></script>


</body>
</html>