(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{114:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return p}));var r=a(3),n=a(7),o=(a(0),a(139)),i={slug:"legacy-migration",id:"legacy-migration",title:"Migrating From Legacy",sidebar_label:"Migrating From Legacy",description:"Migrating From Legacy Guide",keywords:["standard notes","docs","notes app","end-to-end encryption","self-hosting","sync server"],image:"/img/logo.png",hide_title:!1,hide_table_of_contents:!1},c={unversionedId:"self-hosting/legacy-migration",id:"self-hosting/legacy-migration",isDocsHomePage:!1,title:"Migrating From Legacy",description:"Migrating From Legacy Guide",source:"@site/docs/self-hosting/legacy-migration.md",sourceDirName:"self-hosting",slug:"/self-hosting/legacy-migration",permalink:"/self-hosting/legacy-migration",editUrl:"https://github.com/standardnotes/docs/edit/main/docs/self-hosting/legacy-migration.md",version:"current",lastUpdatedAt:1630423070,formattedLastUpdatedAt:"8/31/2021",sidebar_label:"Migrating From Legacy",frontMatter:{slug:"legacy-migration",id:"legacy-migration",title:"Migrating From Legacy",sidebar_label:"Migrating From Legacy",description:"Migrating From Legacy Guide",keywords:["standard notes","docs","notes app","end-to-end encryption","self-hosting","sync server"],image:"/img/logo.png",hide_title:!1,hide_table_of_contents:!1},sidebar:"mainSidebar",previous:{title:"Configuration options",permalink:"/self-hosting/configuration-options"},next:{title:"Securing HTTP traffic of your Sync server",permalink:"/self-hosting/https-support"}},s=[{value:"Preparing a database dump",id:"preparing-a-database-dump",children:[{value:"Database from Docker setup",id:"database-from-docker-setup",children:[]},{value:"External database",id:"external-database",children:[]}]},{value:"Importing your database dump",id:"importing-your-database-dump",children:[]}],d={toc:s};function p(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"preparing-a-database-dump"},"Preparing a database dump"),Object(o.b)("p",null,"If you have previously self-hosted your setup with our legacy Syncing Server, you will need to first dump the data from your existing database. There are two ways to do this depending on whether you had a separate database or the one we provided with our Docker setup."),Object(o.b)("h3",{id:"database-from-docker-setup"},"Database from Docker setup"),Object(o.b)("p",null,"In order to create a database dump, use the following command:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"$ docker exec your_db_container_id sh -c 'exec mysqldump your_database_name -uroot -p \"your_password\"' > ./dbdump.sql\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," In order to get the value of ",Object(o.b)("inlineCode",{parentName:"p"},"your_db_container_id"),", run ",Object(o.b)("inlineCode",{parentName:"p"},"docker ps")," to inspect your running containers. ",Object(o.b)("inlineCode",{parentName:"p"},"your_database_name")," and ",Object(o.b)("inlineCode",{parentName:"p"},"your_password")," have to be changed to whatever you had set up in your .env file.")),Object(o.b)("h3",{id:"external-database"},"External database"),Object(o.b)("p",null,"Run:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'mysqldump your_database_name -h your_host -u your_user -p "your_password" > ./dbdump.sql\n')),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note")," Change ",Object(o.b)("inlineCode",{parentName:"p"},"your_host"),", ",Object(o.b)("inlineCode",{parentName:"p"},"your_database_name"),", ",Object(o.b)("inlineCode",{parentName:"p"},"your_user")," and ",Object(o.b)("inlineCode",{parentName:"p"},"your_password")," to values that you use to connect to your database.")),Object(o.b)("h2",{id:"importing-your-database-dump"},"Importing your database dump"),Object(o.b)("p",null,"In order to import your data to the database that our Standalone setup will create, just place your ",Object(o.b)("inlineCode",{parentName:"p"},"dbdump.sql")," file inside the ",Object(o.b)("inlineCode",{parentName:"p"},"path-to-your-standalone/data/import")," folder. The data will be imported once the setups starts."),Object(o.b)("p",null,"To proceed, head over to our ",Object(o.b)("a",{parentName:"p",href:"/self-hosting/docker"},"Self-hosting with Docker")," page."))}p.isMDXComponent=!0},139:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var d=n.a.createContext({}),p=function(e){var t=n.a.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},u=function(e){var t=p(e.components);return n.a.createElement(d.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},b=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(a),b=r,m=u["".concat(i,".").concat(b)]||u[b]||l[b]||o;return a?n.a.createElement(m,c(c({ref:t},d),{},{components:a})):n.a.createElement(m,c({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var d=2;d<o;d++)i[d]=a[d];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);